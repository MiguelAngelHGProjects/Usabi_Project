{"type":"operationStart","subtype":"profile","data":{"_id":"LuUcmV5BrLjjj6nq","timestamp":"2024-01-11T17:18:20.966Z","state":"queued","mode":"standard","creationDate":"2024-01-11T17:18:20.966Z","modificationDate":"2024-01-11T17:18:20.966Z","shortid":"OlWv_hS","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704993500966,"id":"dvumdujsx2ze9r3","previousOperationId":null,"operationId":"pl5c4t2g6ux9xk8"}
{"type":"log","level":"info","message":"Render request 126 queued for execution and waiting for available worker","previousOperationId":"pl5c4t2g6ux9xk8","timestamp":1704993500966,"id":"51nm2ytr0obqefx"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"pl5c4t2g6ux9xk8","timestamp":1704993500971,"id":"nvmq8a6ue5arw18","previousEventId":"dvumdujsx2ze9r3","operationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500971,"level":"info","message":"Starting rendering request 126","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"fj1madmokokzped","previousOperationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500971,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"1shji4e499ifo3w","previousOperationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500972,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"vqoppipz2g5b6tl","previousOperationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500974,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"lfh4wwencpcpjjr","previousOperationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500979,"level":"warn","message":"Error when processing render request 126\n(because) error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class\nsandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"xcg0kun8cfc9nny","previousOperationId":"73gn4niw0no6lmu"}
{"type":"log","timestamp":1704993500979,"level":"warn","message":"Rendering request 126 finished with error in 13 ms","meta":{"rootId":"nqmhdwu4wvjl1rc","id":"nqmhdwu4wvjl1rc"},"id":"h4vu47s8gi65275","previousOperationId":"73gn4niw0no6lmu"}
{"type":"error","timestamp":1704993500980,"statusCode":400,"weak":true,"entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('http');\n\nfunction beforeRender(req, res, done) {\n  const usabiDataEndpoint = 'http://127.0.0.1:4000/user_projects/usabi_data/';\n\n  http.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    response.on('end', () => {\n      if (response.statusCode === 200) {\n        try {\n          const usabiData = JSON.parse(data);\n\n          // Transformar los datos antes de enviarlos a jsreport\n          const transformedData = JSON.stringify(usabiData.user_project_data);\n\n          req.data = { usabiData: transformedData };\n        } catch (error) {\n          console.error('Error al parsear JSON:', error);\n        }\n      } else {\n        console.error('Error en la solicitud. Código de estado:', response.statusCode);\n      }\n\n      done();\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n\n\n  {{#each usabiData.user_project_data}}\n    <h2>{{user_name}}</h2>\n    <ul>\n      {{#each projects}}\n        <li>{{this}}</li>\n      {{/each}}\n    </ul>\n    <h3>Número de Proyectos: {{projects.length}}</h3>\n        "},"property":"content","logged":true,"previousOperationId":"73gn4niw0no6lmu","id":"is609tbld698z58","stack":"sandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","message":"Error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class"}
