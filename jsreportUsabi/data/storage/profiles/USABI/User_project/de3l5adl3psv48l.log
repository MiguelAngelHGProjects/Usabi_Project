{"type":"operationStart","subtype":"profile","data":{"_id":"KJ2tH0aUFDrPKyyT","timestamp":"2024-01-11T17:16:38.577Z","state":"queued","mode":"standard","creationDate":"2024-01-11T17:16:38.579Z","modificationDate":"2024-01-11T17:16:38.579Z","shortid":"GwzCw4H","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704993398579,"id":"6l7i9xve2ga3zwo","previousOperationId":null,"operationId":"69a62tz304s3jov"}
{"type":"log","level":"info","message":"Render request 123 queued for execution and waiting for available worker","previousOperationId":"69a62tz304s3jov","timestamp":1704993398579,"id":"5dlgofk33y4ca17"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"69a62tz304s3jov","timestamp":1704993398589,"id":"4ng4y253ygoj4ww","previousEventId":"6l7i9xve2ga3zwo","operationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398589,"level":"info","message":"Starting rendering request 123","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"2sfu915ty49cyxp","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398589,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"cyrfz5gn46ubrx0","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398590,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"7zq8ids6qbgvehg","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398595,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"refhgez4aj1mcbs","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398606,"level":"warn","message":"Error when processing render request 123\n(because) error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class\nsandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"l5tqup97j14xd6g","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"log","timestamp":1704993398606,"level":"warn","message":"Rendering request 123 finished with error in 29 ms","meta":{"rootId":"de3l5adl3psv48l","id":"de3l5adl3psv48l"},"id":"fs5j2es1gzo5ie5","previousOperationId":"fn9lj6ush4sbb9x"}
{"type":"error","timestamp":1704993398609,"statusCode":400,"weak":true,"entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('http');\n\nfunction beforeRender(req, res, done) {\n  const usabiDataEndpoint = 'http://127.0.0.1:4000/user_projects/usabi_data/';\n\n  http.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    response.on('end', () => {\n      if (response.statusCode === 200) {\n        try {\n          const usabiData = JSON.parse(data);\n\n          // Transformar los datos antes de enviarlos a jsreport\n          const transformedData = JSON.stringify(usabiData.user_project_data);\n\n          req.data = { usabiData: transformedData };\n        } catch (error) {\n          console.error('Error al parsear JSON:', error);\n        }\n      } else {\n        console.error('Error en la solicitud. Código de estado:', response.statusCode);\n      }\n\n      done();\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n\n\n  {{#each usabiData.user_project_data}}\n    <h2>{{user_name}}</h2>\n    <ul>\n      {{#each projects}}\n        <li>{{this}}</li>\n      {{/each}}\n    </ul>\n    <h3>Número de Proyectos: {{projects.length}}</h3>\n        "},"property":"content","logged":true,"previousOperationId":"fn9lj6ush4sbb9x","id":"hwucs7nbes9gm49","stack":"sandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","message":"Error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class"}
