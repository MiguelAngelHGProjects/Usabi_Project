{"type":"operationStart","subtype":"profile","data":{"_id":"UWVDykHUuGF6O74T","timestamp":"2024-01-09T19:58:29.719Z","state":"queued","mode":"standard","creationDate":"2024-01-09T19:58:29.720Z","modificationDate":"2024-01-09T19:58:29.720Z","shortid":"ycukpxC","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704830309720,"id":"qqlue4tbqw47nwk","previousOperationId":null,"operationId":"lko30sv6jqc7a3c"}
{"type":"log","level":"info","message":"Render request 3 queued for execution and waiting for available worker","previousOperationId":"lko30sv6jqc7a3c","timestamp":1704830309720,"id":"nevd1pu909itpuw"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"lko30sv6jqc7a3c","timestamp":1704830309725,"id":"pp5gzbxrpg1dyzm","previousEventId":"qqlue4tbqw47nwk","operationId":"lp71weow8pd5msx"}
{"type":"log","timestamp":1704830309725,"level":"info","message":"Starting rendering request 3","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"wn5i1k6r769npoq","previousOperationId":"lp71weow8pd5msx"}
{"type":"log","timestamp":1704830309725,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"ukbql3p3a71ot48","previousOperationId":"lp71weow8pd5msx"}
{"type":"log","timestamp":1704830309726,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"ff2eddewfflakyl","previousOperationId":"lp71weow8pd5msx"}
{"type":"log","timestamp":1704830309727,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"f0rl0py2yn16tr8","previousOperationId":"lp71weow8pd5msx"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704830309737,"id":"1zlkot6tse9jetm","previousEventId":"pp5gzbxrpg1dyzm","operationId":"wbfihoz1itiavyh","previousOperationId":"lp71weow8pd5msx"}
{"type":"operationStart","subtype":"script","name":"scripts usabi-data","previousOperationId":"wbfihoz1itiavyh","timestamp":1704830309737,"id":"7iwf1bj8nvjiiak","previousEventId":"1zlkot6tse9jetm","operationId":"fwxt3m6wjc0mlrq"}
{"type":"log","timestamp":1704830309739,"level":"warn","message":"Error when processing render request 3\n(because) error when evaluating custom script /USABI/usabi-data\nfetch is not defined\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)\nReferenceError: fetch is not defined\n    at Object.beforeRender (sandbox.js:6:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:32:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"oz1usa710w2735y","previousOperationId":"fwxt3m6wjc0mlrq"}
{"type":"log","timestamp":1704830309739,"level":"warn","message":"Rendering request 3 finished with error in 20 ms","meta":{"rootId":"4ni273k77ivcab6","id":"4ni273k77ivcab6"},"id":"89vpemr6cmevnhp","previousOperationId":"fwxt3m6wjc0mlrq"}
{"type":"error","timestamp":1704830309741,"statusCode":400,"weak":true,"lineNumber":6,"decoratedSuffix":"\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)","entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"function beforeRender(done) {\n  // Configura el endpoint para obtener datos de \"usabi-data\" desde tu backend Rails\n  var usabiDataEndpoint = 'http://127.0.0.1:4000/usabi_data';\n\n  // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n  fetch(usabiDataEndpoint)\n    .then(response => response.json())\n    .then(usabiData => {\n      // Establece el objeto de datos para la plantilla\n      request.data = { usabiData: usabiData };\n\n      // Llama a done() para continuar con el proceso de renderizado\n      done();\n    })\n    .catch(error => {\n      console.error('Error en la solicitud:', error);\n      done();\n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"fwxt3m6wjc0mlrq","id":"cufebm1yw2una7x","stack":"ReferenceError: fetch is not defined\n    at Object.beforeRender (sandbox.js:6:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:32:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","message":"Error when evaluating custom script /USABI/usabi-data\nfetch is not defined\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)"}
