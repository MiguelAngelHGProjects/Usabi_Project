{"type":"operationStart","subtype":"profile","data":{"_id":"dbFFUAMdH4LtQ3Zb","timestamp":"2024-01-09T19:58:31.787Z","state":"queued","mode":"standard","creationDate":"2024-01-09T19:58:31.788Z","modificationDate":"2024-01-09T19:58:31.788Z","shortid":"b_JUnvL","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704830311787,"id":"zkrdf4okeqx28a7","previousOperationId":null,"operationId":"5qb57jqdn32sxx9"}
{"type":"log","level":"info","message":"Render request 4 queued for execution and waiting for available worker","previousOperationId":"5qb57jqdn32sxx9","timestamp":1704830311787,"id":"dm6k4na1xn15jmj"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"5qb57jqdn32sxx9","timestamp":1704830311792,"id":"qz1abt9uc9tm5d9","previousEventId":"zkrdf4okeqx28a7","operationId":"e7giriff3r2s25b"}
{"type":"log","timestamp":1704830311792,"level":"info","message":"Starting rendering request 4","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"o896o8gcqqp7oax","previousOperationId":"e7giriff3r2s25b"}
{"type":"log","timestamp":1704830311793,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"eytzocrghvmokqz","previousOperationId":"e7giriff3r2s25b"}
{"type":"log","timestamp":1704830311793,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"hsu1ovlglbw7oiu","previousOperationId":"e7giriff3r2s25b"}
{"type":"log","timestamp":1704830311795,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"pgluaj1j6xb3erb","previousOperationId":"e7giriff3r2s25b"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704830311807,"id":"3mazu6pp4mukdkx","previousEventId":"qz1abt9uc9tm5d9","operationId":"cjp37hxsem0dshk","previousOperationId":"e7giriff3r2s25b"}
{"type":"operationStart","subtype":"script","name":"scripts usabi-data","previousOperationId":"cjp37hxsem0dshk","timestamp":1704830311807,"id":"akiwh0t62iy4k0o","previousEventId":"3mazu6pp4mukdkx","operationId":"0q5t60biukdi0gv"}
{"type":"log","timestamp":1704830311809,"level":"warn","message":"Error when processing render request 4\n(because) error when evaluating custom script /USABI/usabi-data\nProtocol \"http:\" not supported. Expected \"https:\"\n\n(sandbox.js line 8:9)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |         ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)\nTypeError [ERR_INVALID_PROTOCOL]: Protocol \"http:\" not supported. Expected \"https:\"\n    at new NodeError (node:internal/errors:406:5)\n    at new ClientRequest (node:_http_client:183:11)\n    at request (node:https:378:10)\n    at Object.get (node:https:412:15)\n    at Object.beforeRender (sandbox.js:8:9)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"lpgq652asa6h356","previousOperationId":"0q5t60biukdi0gv"}
{"type":"log","timestamp":1704830311809,"level":"warn","message":"Rendering request 4 finished with error in 22 ms","meta":{"rootId":"9v5s0g2gzc9p4a8","id":"9v5s0g2gzc9p4a8"},"id":"7pp0a4a42udsf7p","previousOperationId":"0q5t60biukdi0gv"}
{"type":"error","timestamp":1704830311811,"code":"ERR_INVALID_PROTOCOL","statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 8:9)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |         ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)","entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const https = require('https');\n\nfunction beforeRender(done) {\n  // Configura el endpoint para obtener datos de \"usabi-data\" desde tu backend Rails\n  var usabiDataEndpoint = 'http://127.0.0.1:4000/usabi_data';\n\n  // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n  https.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    // Recopila los datos mientras se reciben\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    // Cuando se completa la respuesta, parsea los datos como JSON y continÃºa con el proceso de renderizado\n    response.on('end', () => {\n      try {\n        const usabiData = JSON.parse(data);\n        // Establece el objeto de datos para la plantilla\n        request.data = { usabiData: usabiData };\n        done();\n      } catch (error) {\n        console.error('Error al parsear JSON:', error);\n        done();\n      }\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n"},"property":"content","logged":true,"previousOperationId":"0q5t60biukdi0gv","id":"s7954vtlftzhrh6","stack":"TypeError [ERR_INVALID_PROTOCOL]: Protocol \"http:\" not supported. Expected \"https:\"\n    at new NodeError (node:internal/errors:406:5)\n    at new ClientRequest (node:_http_client:183:11)\n    at request (node:https:378:10)\n    at Object.get (node:https:412:15)\n    at Object.beforeRender (sandbox.js:8:9)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)","message":"Error when evaluating custom script /USABI/usabi-data\nProtocol \"http:\" not supported. Expected \"https:\"\n\n(sandbox.js line 8:9)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |         ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)"}
