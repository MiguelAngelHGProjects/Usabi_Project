{"type":"operationStart","subtype":"profile","data":{"_id":"IInmshy23JWGiWy7","timestamp":"2024-01-11T17:17:32.207Z","state":"queued","mode":"standard","creationDate":"2024-01-11T17:17:32.208Z","modificationDate":"2024-01-11T17:17:32.208Z","shortid":"PG9DYk7","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704993452208,"id":"3ienyf005dknjup","previousOperationId":null,"operationId":"q7gzc66pb4jhpgl"}
{"type":"log","level":"info","message":"Render request 125 queued for execution and waiting for available worker","previousOperationId":"q7gzc66pb4jhpgl","timestamp":1704993452208,"id":"jh9wb69ca45lkik"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"q7gzc66pb4jhpgl","timestamp":1704993452214,"id":"c4rhtdtgtdn9vsl","previousEventId":"3ienyf005dknjup","operationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452214,"level":"info","message":"Starting rendering request 125","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"kghiygwk1tfd69a","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452214,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"s15gnmpop64tf2u","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452215,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"q7w8jimobh7sglp","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452216,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"r0oo09nyrwipw69","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452221,"level":"warn","message":"Error when processing render request 125\n(because) error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class\nsandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"odllldn4llhl0rq","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"log","timestamp":1704993452221,"level":"warn","message":"Rendering request 125 finished with error in 14 ms","meta":{"rootId":"0rx2ui67fczvpm1","id":"0rx2ui67fczvpm1"},"id":"lk4jt1hau3fphp8","previousOperationId":"b3lqs6zfartfwjm"}
{"type":"error","timestamp":1704993452222,"statusCode":400,"weak":true,"entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('http');\n\nfunction beforeRender(req, res, done) {\n  const usabiDataEndpoint = 'http://127.0.0.1:4000/user_projects/usabi_data/';\n\n  http.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    response.on('end', () => {\n      if (response.statusCode === 200) {\n        try {\n          const usabiData = JSON.parse(data);\n\n          // Transformar los datos antes de enviarlos a jsreport\n          const transformedData = JSON.stringify(usabiData.user_project_data);\n\n          req.data = { usabiData: transformedData };\n        } catch (error) {\n          console.error('Error al parsear JSON:', error);\n        }\n      } else {\n        console.error('Error en la solicitud. Código de estado:', response.statusCode);\n      }\n\n      done();\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n\n\n  {{#each usabiData.user_project_data}}\n    <h2>{{user_name}}</h2>\n    <ul>\n      {{#each projects}}\n        <li>{{this}}</li>\n      {{/each}}\n    </ul>\n    <h3>Número de Proyectos: {{projects.length}}</h3>\n        "},"property":"content","logged":true,"previousOperationId":"b3lqs6zfartfwjm","id":"8tbyyzqcugknqhd","stack":"sandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","message":"Error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class"}
