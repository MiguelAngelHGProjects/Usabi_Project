{"type":"operationStart","subtype":"profile","data":{"_id":"t7v8ZnmnLbrozowr","timestamp":"2024-01-09T19:57:46.167Z","state":"queued","mode":"standard","creationDate":"2024-01-09T19:57:46.168Z","modificationDate":"2024-01-09T19:57:46.168Z","shortid":"1sTV1V6","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704830266167,"id":"a8uef4duza8tjw5","previousOperationId":null,"operationId":"c0ctotgugdg6j5c"}
{"type":"log","level":"info","message":"Render request 2 queued for execution and waiting for available worker","previousOperationId":"c0ctotgugdg6j5c","timestamp":1704830266168,"id":"9k8ranvj716n4a3"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"c0ctotgugdg6j5c","timestamp":1704830266174,"id":"xcdf8ibb5qbb541","previousEventId":"a8uef4duza8tjw5","operationId":"xso8zvt3k3nprd1"}
{"type":"log","timestamp":1704830266174,"level":"info","message":"Starting rendering request 2","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"a0kg49mr4wi8odc","previousOperationId":"xso8zvt3k3nprd1"}
{"type":"log","timestamp":1704830266175,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"y690wbgv6rt6pxx","previousOperationId":"xso8zvt3k3nprd1"}
{"type":"log","timestamp":1704830266176,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"ncsgh5n550dt56r","previousOperationId":"xso8zvt3k3nprd1"}
{"type":"log","timestamp":1704830266178,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"hy8knzlfvp9pyft","previousOperationId":"xso8zvt3k3nprd1"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704830266302,"id":"aiegylug6dadahn","previousEventId":"xcdf8ibb5qbb541","operationId":"bln3ttfo1ycf8gw","previousOperationId":"xso8zvt3k3nprd1"}
{"type":"operationStart","subtype":"script","name":"scripts usabi-data","previousOperationId":"bln3ttfo1ycf8gw","timestamp":1704830266302,"id":"0ccxiop0tcx1lbx","previousEventId":"aiegylug6dadahn","operationId":"8whvzw5xrvlxyxk"}
{"type":"log","timestamp":1704830266305,"level":"warn","message":"Error when processing render request 2\n(because) error when evaluating custom script /USABI/usabi-data\nfetch is not defined\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)\nReferenceError: fetch is not defined\n    at Object.beforeRender (sandbox.js:6:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:32:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"h29v3rnv92qrmxh","previousOperationId":"8whvzw5xrvlxyxk"}
{"type":"log","timestamp":1704830266305,"level":"warn","message":"Rendering request 2 finished with error in 138 ms","meta":{"rootId":"jwp3ewt42qe8l4m","id":"jwp3ewt42qe8l4m"},"id":"4nsl3mu9ghx9zii","previousOperationId":"8whvzw5xrvlxyxk"}
{"type":"error","timestamp":1704830266308,"statusCode":400,"weak":true,"lineNumber":6,"decoratedSuffix":"\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)","entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"function beforeRender(done) {\n  // Configura el endpoint para obtener datos de \"usabi-data\" desde tu backend Rails\n  var usabiDataEndpoint = 'http://127.0.0.1:4000/usabi_data';\n\n  // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n  fetch(usabiDataEndpoint)\n    .then(response => response.json())\n    .then(usabiData => {\n      // Establece el objeto de datos para la plantilla\n      request.data = { usabiData: usabiData };\n\n      // Llama a done() para continuar con el proceso de renderizado\n      done();\n    })\n    .catch(error => {\n      console.error('Error en la solicitud:', error);\n      done();\n    });\n}\n"},"property":"content","logged":true,"previousOperationId":"8whvzw5xrvlxyxk","id":"w1gbps430btaqfo","stack":"ReferenceError: fetch is not defined\n    at Object.beforeRender (sandbox.js:6:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:32:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","message":"Error when evaluating custom script /USABI/usabi-data\nfetch is not defined\n\n(sandbox.js line 6:3)\n\n  4 |\n  5 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n> 6 |   fetch(usabiDataEndpoint)\n    |   ^\n  7 |     .then(response => response.json())\n  8 |     .then(usabiData => {\n  9 |       // Establece el objeto de datos para la plantilla\n\n(sandbox.js line 32:18)"}
