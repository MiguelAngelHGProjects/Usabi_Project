{"type":"operationStart","subtype":"profile","data":{"_id":"a5o5y4OC6C2UECC9","timestamp":"2024-01-09T19:58:51.203Z","state":"queued","mode":"standard","creationDate":"2024-01-09T19:58:51.204Z","modificationDate":"2024-01-09T19:58:51.204Z","shortid":"EKEwoVp","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704830331204,"id":"36zvrhktxo92zsa","previousOperationId":null,"operationId":"oob9o0mfo8a5i3b"}
{"type":"log","level":"info","message":"Render request 5 queued for execution and waiting for available worker","previousOperationId":"oob9o0mfo8a5i3b","timestamp":1704830331204,"id":"431w0fp24c51e6y"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"oob9o0mfo8a5i3b","timestamp":1704830331209,"id":"46dsynomb5y0pd2","previousEventId":"36zvrhktxo92zsa","operationId":"xlwhq21cyh6xr3l"}
{"type":"log","timestamp":1704830331209,"level":"info","message":"Starting rendering request 5","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"kuvsc3ftv59q9h7","previousOperationId":"xlwhq21cyh6xr3l"}
{"type":"log","timestamp":1704830331209,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"gn0v9wl2y2vrs53","previousOperationId":"xlwhq21cyh6xr3l"}
{"type":"log","timestamp":1704830331210,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"v9mt5ljlfh38jud","previousOperationId":"xlwhq21cyh6xr3l"}
{"type":"log","timestamp":1704830331211,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"6ouac405zyolikk","previousOperationId":"xlwhq21cyh6xr3l"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704830331221,"id":"ffh5lf2yxfpudy3","previousEventId":"46dsynomb5y0pd2","operationId":"0l87hzxcyeu4ax1","previousOperationId":"xlwhq21cyh6xr3l"}
{"type":"operationStart","subtype":"script","name":"scripts usabi-data","previousOperationId":"0l87hzxcyeu4ax1","timestamp":1704830331221,"id":"fyg6gc78n3ga2dv","previousEventId":"ffh5lf2yxfpudy3","operationId":"o1hirwfylcktxcd"}
{"type":"log","timestamp":1704830331224,"level":"warn","message":"Error when processing render request 5\n(because) error when evaluating custom script /USABI/usabi-data\nProtocol \"http:\" not supported. Expected \"https:\"\n\n(sandbox.js line 8:8)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   http.get(usabiDataEndpoint, response => {\n     |        ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)\nTypeError [ERR_INVALID_PROTOCOL]: Protocol \"http:\" not supported. Expected \"https:\"\n    at new NodeError (node:internal/errors:406:5)\n    at new ClientRequest (node:_http_client:183:11)\n    at request (node:https:378:10)\n    at Object.get (node:https:412:15)\n    at Object.beforeRender (sandbox.js:8:8)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"6qykxexxqcb5szn","previousOperationId":"o1hirwfylcktxcd"}
{"type":"log","timestamp":1704830331224,"level":"warn","message":"Rendering request 5 finished with error in 21 ms","meta":{"rootId":"qffgjyfvz3jrz1l","id":"qffgjyfvz3jrz1l"},"id":"wn40expvens9g9h","previousOperationId":"o1hirwfylcktxcd"}
{"type":"error","timestamp":1704830331226,"code":"ERR_INVALID_PROTOCOL","statusCode":400,"weak":true,"decoratedSuffix":"\n\n(sandbox.js line 8:8)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   http.get(usabiDataEndpoint, response => {\n     |        ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)","entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('https');\n\nfunction beforeRender(done) {\n  // Configura el endpoint para obtener datos de \"usabi-data\" desde tu backend Rails\n  var usabiDataEndpoint = 'http://127.0.0.1:4000/usabi_data';\n\n  // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n  http.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    // Recopila los datos mientras se reciben\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    // Cuando se completa la respuesta, parsea los datos como JSON y continÃºa con el proceso de renderizado\n    response.on('end', () => {\n      try {\n        const usabiData = JSON.parse(data);\n        // Establece el objeto de datos para la plantilla\n        request.data = { usabiData: usabiData };\n        done();\n      } catch (error) {\n        console.error('Error al parsear JSON:', error);\n        done();\n      }\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n"},"property":"content","logged":true,"previousOperationId":"o1hirwfylcktxcd","id":"fpa1lyeo47xczcx","stack":"TypeError [ERR_INVALID_PROTOCOL]: Protocol \"http:\" not supported. Expected \"https:\"\n    at new NodeError (node:internal/errors:406:5)\n    at new ClientRequest (node:_http_client:183:11)\n    at request (node:https:378:10)\n    at Object.get (node:https:412:15)\n    at Object.beforeRender (sandbox.js:8:8)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:45:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)","message":"Error when evaluating custom script /USABI/usabi-data\nProtocol \"http:\" not supported. Expected \"https:\"\n\n(sandbox.js line 8:8)\n\n   6 |\n   7 |   // Realiza una solicitud HTTP para obtener datos de \"usabi-data\"\n>  8 |   http.get(usabiDataEndpoint, response => {\n     |        ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 45:18)"}
