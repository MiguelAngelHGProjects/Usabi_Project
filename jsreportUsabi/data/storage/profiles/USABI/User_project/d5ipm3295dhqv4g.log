{"type":"operationStart","subtype":"profile","data":{"_id":"MPh0BvTZqEd785bM","timestamp":"2024-01-11T17:17:03.022Z","state":"queued","mode":"standard","creationDate":"2024-01-11T17:17:03.023Z","modificationDate":"2024-01-11T17:17:03.023Z","shortid":"X7b-_FM","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704993423023,"id":"5iz9zvfotksf7d5","previousOperationId":null,"operationId":"l6en064armdweou"}
{"type":"log","level":"info","message":"Render request 124 queued for execution and waiting for available worker","previousOperationId":"l6en064armdweou","timestamp":1704993423023,"id":"zb6ts426uy5qvjj"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"l6en064armdweou","timestamp":1704993423027,"id":"k22gcqzad09wyq6","previousEventId":"5iz9zvfotksf7d5","operationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423027,"level":"info","message":"Starting rendering request 124","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"t8xnk8zgw7r408g","previousOperationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423027,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: handlebars, preview: true }","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"84z5k0g0t91085x","previousOperationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423027,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"el6dgtn0w2kw1y3","previousOperationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423029,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"y52lwoho9oysnpx","previousOperationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423036,"level":"warn","message":"Error when processing render request 124\n(because) error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class\nsandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"taxazqy0127hdjh","previousOperationId":"irkypdavfnkjzv9"}
{"type":"log","timestamp":1704993423036,"level":"warn","message":"Rendering request 124 finished with error in 14 ms","meta":{"rootId":"d5ipm3295dhqv4g","id":"d5ipm3295dhqv4g"},"id":"fqyex23c7jtcxcw","previousOperationId":"irkypdavfnkjzv9"}
{"type":"error","timestamp":1704993423037,"statusCode":400,"weak":true,"entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('http');\n\nfunction beforeRender(req, res, done) {\n  const usabiDataEndpoint = 'http://127.0.0.1:4000/user_projects/usabi_data/';\n\n  http.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    response.on('end', () => {\n      if (response.statusCode === 200) {\n        try {\n          const usabiData = JSON.parse(data);\n\n          // Transformar los datos antes de enviarlos a jsreport\n          const transformedData = JSON.stringify(usabiData.user_project_data);\n\n          req.data = { usabiData: transformedData };\n        } catch (error) {\n          console.error('Error al parsear JSON:', error);\n        }\n      } else {\n        console.error('Error en la solicitud. Código de estado:', response.statusCode);\n      }\n\n      done();\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    done();\n  });\n}\n\n\n  {{#each usabiData.user_project_data}}\n    <h2>{{user_name}}</h2>\n    <ul>\n      {{#each projects}}\n        <li>{{this}}</li>\n      {{/each}}\n    </ul>\n    <h3>Número de Proyectos: {{projects.length}}</h3>\n        "},"property":"content","logged":true,"previousOperationId":"irkypdavfnkjzv9","id":"rbeaiw1w8989n37","stack":"sandbox.js:38\n  {{#each usabiData.user_project_data}}\n   ^\n\nSyntaxError: Private field '#each' must be declared in an enclosing class\n    at new Script (node:vm:93:7)\n    at doCompileScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:154:10)\n    at run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:135:74)\n    at WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:20)","message":"Error when evaluating custom script /USABI/usabi-data\nPrivate field '#each' must be declared in an enclosing class"}
