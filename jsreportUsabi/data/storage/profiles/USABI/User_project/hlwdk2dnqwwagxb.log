{"type":"operationStart","subtype":"profile","data":{"_id":"js6UMMniDKdgFCc0","timestamp":"2024-01-09T20:03:41.575Z","state":"queued","mode":"standard","creationDate":"2024-01-09T20:03:41.576Z","modificationDate":"2024-01-09T20:03:41.576Z","shortid":"74NCZfp","$entitySet":"profiles"},"doDiffs":false,"timestamp":1704830621575,"id":"3h55ywkozd332p8","previousOperationId":null,"operationId":"ni7c7x0c2r9weyq"}
{"type":"log","level":"info","message":"Render request 10 queued for execution and waiting for available worker","previousOperationId":"ni7c7x0c2r9weyq","timestamp":1704830621575,"id":"hwt2mvr8ms8ad6y"}
{"type":"operationStart","subtype":"render","name":"User_project","previousOperationId":"ni7c7x0c2r9weyq","timestamp":1704830621582,"id":"oy18jtl71c6kaon","previousEventId":"3h55ywkozd332p8","operationId":"u5kcn3xzdmveubv"}
{"type":"log","timestamp":1704830621582,"level":"info","message":"Starting rendering request 10","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"xju7g65j67s1iqc","previousOperationId":"u5kcn3xzdmveubv"}
{"type":"log","timestamp":1704830621583,"level":"info","message":"Rendering template { name: User_project, recipe: chrome-pdf, engine: jsrender, preview: true }","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"xocpsh6iyh225qi","previousOperationId":"u5kcn3xzdmveubv"}
{"type":"log","timestamp":1704830621584,"level":"debug","message":"Data item not defined for this template.","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"l1icmll4h9u2q69","previousOperationId":"u5kcn3xzdmveubv"}
{"type":"log","timestamp":1704830621586,"level":"debug","message":"Executing script usabi-data (beforeRender)","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"fcuowemnx5fkqan","previousOperationId":"u5kcn3xzdmveubv"}
{"type":"operationStart","subtype":"scriptsBeforeRender","name":"scripts beforeRender","timestamp":1704830621699,"id":"3worjl9xl44uhpk","previousEventId":"oy18jtl71c6kaon","operationId":"vnkg3natl8s31ev","previousOperationId":"u5kcn3xzdmveubv"}
{"type":"operationStart","subtype":"script","name":"scripts usabi-data","previousOperationId":"vnkg3natl8s31ev","timestamp":1704830621699,"id":"px74xqanxxo5lqz","previousEventId":"3worjl9xl44uhpk","operationId":"4looha03f3s7l6r"}
{"type":"log","timestamp":1704830621703,"level":"warn","message":"Error when processing render request 10\n(because) error when evaluating custom script /USABI/usabi-data\nhttps is not defined\n\n(sandbox.js line 8:3)\n\n   6 |\n   7 |   // Realiza una solicitud HTTPS para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |   ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 47:18)\nReferenceError: https is not defined\n    at Object.beforeRender (sandbox.js:8:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:47:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"uhbuziyrt2ut2t3","previousOperationId":"4looha03f3s7l6r"}
{"type":"log","timestamp":1704830621704,"level":"warn","message":"Rendering request 10 finished with error in 129 ms","meta":{"rootId":"hlwdk2dnqwwagxb","id":"hlwdk2dnqwwagxb"},"id":"tl8d0kpldy4akuv","previousOperationId":"4looha03f3s7l6r"}
{"type":"error","timestamp":1704830621707,"statusCode":400,"weak":true,"lineNumber":8,"decoratedSuffix":"\n\n(sandbox.js line 8:3)\n\n   6 |\n   7 |   // Realiza una solicitud HTTPS para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |   ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 47:18)","entity":{"shortid":"NOEOwvil2L","name":"usabi-data","content":"const http = require('http');\n\nfunction beforeRender(done) {\n  // Configura el endpoint para obtener datos de \"usabi-data\" desde tu backend Rails\n  const usabiDataEndpoint = 'http://127.0.0.1:4000/usabi_data';\n\n  // Realiza una solicitud HTTPS para obtener datos de \"usabi-data\"\n  https.get(usabiDataEndpoint, response => {\n    let data = '';\n\n    // Recopila los datos mientras se reciben\n    response.on('data', chunk => {\n      data += chunk;\n    });\n\n    // Cuando se completa la respuesta, parsea los datos como JSON\n    response.on('end', () => {\n      try {\n        const usabiData = JSON.parse(data);\n        // Establece el objeto de datos para la plantilla\n        request.data = { usabiData: usabiData };\n      } catch (error) {\n        console.error('Error al parsear JSON:', error);\n      } finally {\n        // Llama a done() para continuar con el proceso de renderizado\n        done();\n      }\n    });\n  }).on('error', error => {\n    console.error('Error en la solicitud:', error);\n    // Llama a done() incluso en caso de error para continuar con el proceso de renderizado\n    done();\n  });\n}\n"},"property":"content","logged":true,"previousOperationId":"4looha03f3s7l6r","id":"il09v47ho5116tg","stack":"ReferenceError: https is not defined\n    at Object.beforeRender (sandbox.js:8:3)\n    at executionFn (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:67:35)\n    at sandbox.js:47:18\n    at async run (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/createSandbox.js:137:16)\n    at async WorkerReporter.runInSandbox [as _runInSandbox] (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/sandbox/runInSandbox.js:195:14)\n    at async executeScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/executeScript.js:122:12)\n    at async Scripts._runScript (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:140:30)\n    at async Scripts.handleBeforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-scripts/lib/worker.js:64:7)\n    at async ListenerCollection.fire (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/shared/listenerCollection.js:157:21)\n    at async beforeRender (/home/miguel/project_workspace/jsreportUsabi/node_modules/@jsreport/jsreport-core/lib/worker/render/render.js:24:5)","message":"Error when evaluating custom script /USABI/usabi-data\nhttps is not defined\n\n(sandbox.js line 8:3)\n\n   6 |\n   7 |   // Realiza una solicitud HTTPS para obtener datos de \"usabi-data\"\n>  8 |   https.get(usabiDataEndpoint, response => {\n     |   ^\n   9 |     let data = '';\n  10 |\n  11 |     // Recopila los datos mientras se reciben\n\n(sandbox.js line 47:18)"}
